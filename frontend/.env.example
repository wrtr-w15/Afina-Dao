# ========================================
# Afina DAO Wiki - Environment Variables
# ========================================
# 
# Скопируйте этот файл в .env.local и заполните значения:
# cp .env.example .env.local
#

# ========================================
# Database Configuration
# ========================================
# Настройки подключения к MySQL базе данных

DB_HOST=localhost
DB_PORT=3306
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=afina_dao_wiki

# ========================================
# Admin Authentication
# ========================================
# Пароль для входа в админ-панель

ADMIN_PASSWORD=your_secure_admin_password

# Секретный ключ для шифрования сессий
# Должен быть минимум 32 символа!
# Рекомендуется сгенерировать случайную строку
ADMIN_SESSION_SECRET=your_32_character_secret_key_minimum_length_required

# ========================================
# Telegram Bot Configuration (2FA / Admin)
# ========================================
# Настройки для двухфакторной аутентификации админа через Telegram

# Токен бота Telegram для 2FA (получить у @BotFather)
TELEGRAM_BOT_TOKEN=your_telegram_2fa_bot_token_here

# ID чатов для получения уведомлений 2FA и оплат (до 3, разделенные запятыми)
# Узнать можно у @userinfobot
# Пример: TELEGRAM_CHAT_ID=123456789,987654321,111222333
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# ========================================
# Telegram Subscription Bot Configuration
# ========================================
# Настройки для бота подписок (отдельный бот для пользователей)

# Токен бота Telegram для подписок (получить у @BotFather)
# ЭТО ДОЛЖЕН БЫТЬ ДРУГОЙ БОТ, не тот что для 2FA!
TELEGRAM_SUBSCRIPTION_BOT_TOKEN=your_telegram_subscription_bot_token

# ========================================
# Application Configuration
# ========================================
# Общие настройки приложения

# Режим работы: production или development
NODE_ENV=development

# Порт для запуска приложения (по умолчанию 3000)
PORT=3000

# Публичный URL API (опционально, по умолчанию используется текущий домен)
# NEXT_PUBLIC_API_URL=https://yourdomain.com

# ========================================
# Security Configuration
# ========================================
# Настройки безопасности

# Разрешенный origin для CORS (для API endpoints)
# Укажите ваш домен, например: https://yourdomain.com
# Для разработки можно оставить пустым (будет использоваться origin из запроса для localhost)
ALLOWED_ORIGIN=https://yourdomain.com

# Секретный токен для проверки Telegram webhook
# Сгенерируйте случайную строку (минимум 32 символа)
# Этот токен нужно указать при настройке webhook в Telegram
TELEGRAM_WEBHOOK_SECRET=your_webhook_secret_token_minimum_32_characters

# ========================================
# Discord Bot Configuration
# ========================================
# Настройки для Discord бота управления подписками

# Токен Discord бота (получить на https://discord.com/developers)
# НИКОГДА не коммитьте реальный токен! Только в .env.local
DISCORD_BOT_TOKEN=your_discord_bot_token

# Секрет OAuth2 приложения Discord (Discord Developer Portal → OAuth2)
DISCORD_CLIENT_SECRET=your_discord_client_secret

# Redirect URI для Discord OAuth (должен совпадать с настройками в Discord)
DISCORD_REDIRECT_URI=http://localhost:3000/api/discord/callback

# ID приложения Discord (Client ID в Developer Portal)
DISCORD_CLIENT_ID=your_discord_client_id

# ID сервера Discord (Guild ID)
DISCORD_GUILD_ID=your_discord_guild_id

# ID роли подписчика
DISCORD_SUBSCRIBER_ROLE_ID=your_discord_subscriber_role_id

# Пригласительная ссылка на Discord сервер
DISCORD_INVITE_URL=https://discord.com/invite/your_server

# Публичная ссылка Discord (для страницы успешной оплаты в браузере)
NEXT_PUBLIC_DISCORD_INVITE_URL=https://discord.com/invite/your_server

# ========================================
# Notion Configuration
# ========================================
# Настройки для интеграции с Notion

# API ключ Notion Integration (получить на https://www.notion.so/my-integrations)
# НИКОГДА не коммитьте реальный ключ! Только в .env.local
NOTION_API_KEY=your_notion_api_key

# ID страницы Notion для доступа подписчикам (из URL страницы)
NOTION_SHARED_PAGE_ID=your_notion_page_id

# ID базы данных Notion для отслеживания доступа (опционально)
NOTION_ACCESS_DATABASE_ID=your_notion_database_id

# Внутренний API Notion: token_v2 из cookies (для выдачи доступа к странице)
# Получить: DevTools → Application → Cookies → notion.so → token_v2
NOTION_TOKEN_V2=your_notion_token_v2
NOTION_WORKSPACE_NAME=YourWorkspaceName

# SCIM API (Enterprise): отзыв доступа (DELETE). Выдача через SCIM отключена: Notion добавляет только members, не guests.
# Гостей приглашайте вручную в Notion. Токен нужен только для revokeAccess (удаление из workspace).
NOTION_SCIM_TOKEN=your_notion_scim_token

# Публичный URL приложения (для OAuth и webhook)
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# ========================================
# Payment Configuration (NOWPayments)
# ========================================
# Настройки платёжной системы NOWPayments
# Документация: https://documenter.getpostman.com/view/7907941/2s93JusNJt

# API ключ NOWPayments (получить в личном кабинете NOWPayments)
NOWPAYMENTS_API_KEY=your_nowpayments_api_key

# IPN Secret для проверки webhook (получить в личном кабинете NOWPayments)
NOWPAYMENTS_IPN_SECRET=your_nowpayments_ipn_secret

# Public Key (опционально)
NOWPAYMENTS_PUBLIC_KEY=your_nowpayments_public_key

# Валюта для оплаты (по умолчанию usdtarb - USDT на Arbitrum)
NOWPAYMENTS_PAY_CURRENCY=usdtarb

# Секрет для ручного подтверждения оплаты (POST/GET /api/nowpayments/confirm-payment?payment_id=XXX&secret=YYY)
NOWPAYMENTS_CONFIRM_SECRET=

# Секретный ключ для проверки webhook платёжной системы (legacy)
PAYMENT_WEBHOOK_SECRET=your_payment_webhook_secret

# ========================================
# Scheduler Configuration
# ========================================
# Настройки планировщика задач

# Интервал проверки истёкших подписок в минутах (по умолчанию 60)
SCHEDULER_INTERVAL_MINUTES=60

